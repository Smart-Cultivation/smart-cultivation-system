{% extends "components/master_layout.html" %}

{% block content %}
<div class="container pt-4 py-5 mb-5">
    <div class="row">
        <div class="col-md-4">
            <div class="card">
                <div class="card-body">
                    <h1>Current Fish Pond</h1>
                    <ul>
                        <li>
                            <a href="/smart_cultivation_system/{{ pond.pond_id }}">
                                Fish Pond: {{ pond.pond_id }} - {{ pond.pond_name }}
                            </a>
                        </li>
                        <li>
                            <p>{{ pond.location }}</p>
                        </li>
                        <!-- You can include images or other relevant details if available -->
                    </ul>
                </div>
            </div>
        </div>

        <div class="col-md-8">
            <div class="card">
                <div class="card-body">
                    <h1>Fish Pond Details</h1>
                    <h2>Fish Pond ID: {{ pond.pond_id }}</h2>
                    <h3>Pond Name: {{ pond.pond_name }}</h3>
                    <h3>Location: {{ pond.location }}</h3>
                    <h3>Creation Date: {{ pond.creation_date }}</h3>

                    <h2>Water Quality</h2>
                    <table id="waterQualityTable" class="table table-striped">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>pH</th>
                                <th>Turbidity</th>
                                <th>Temperature</th>
                                <th>Nitrate</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for waterQuality in waterQualities %}
                            <tr>
                                <td>{{ waterQuality.date }}</td>
                                <td>{{ waterQuality.pH }}</td>
                                <td>{{ waterQuality.turbidity }}</td>
                                <td>{{ waterQuality.temperature }}</td>
                                <td>{{ waterQuality.nitrate }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>

                    <h2>Fish Data</h2>
                    <table id="fishDataTable" class="table table-striped">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Fish Weight</th>
                                <th>Fish Height</th>
                                <th>Fish Population</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for fishData in fishData %}
                            <tr>
                                <td>{{ fishData.date }}</td>
                                <td>{{ fishData.fish_weight }}</td>
                                <td>{{ fishData.fish_height }}</td>
                                <td>{{ fishData.fish_population }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>

                    <h2>Metrics</h2>
                    <table id="metricsTable" class="table table-striped">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Total Fish Weight</th>
                                <th>Average Fish Weight</th>
                                <th>Average Fish Height</th>
                                <th>Total Population</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for metric in metrics %}
                            <tr>
                                <td>{{ metric.date }}</td>
                                <td>{{ metric.total_fish_weight }}</td>
                                <td>{{ metric.average_fish_weight }}</td>
                                <td>{{ metric.average_fish_height }}</td>
                                <td>{{ metric.total_population }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block script %}
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
    $(document).ready(function () {
        $('#waterQualityTable').DataTable({
            "order": [[0, 'desc']],
            "responsive": true
        });

        $('#fishDataTable').DataTable({
            "order": [[0, 'desc']],
            "responsive": true
        });

        $('#metricsTable').DataTable({
            "order": [[0, 'desc']],
            "responsive": true
        });
    });
</script>
{% endblock %}
